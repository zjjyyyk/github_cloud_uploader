<Window x:Class="CloudUploader.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        Title="ZJJYYYK Cloud Uploader" 
        Height="700" 
        Width="900"
        WindowStartupLocation="CenterScreen"
        Closing="Window_Closing">

    <Window.Resources>
        <Style x:Key="GroupBoxHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>
    </Window.Resources>

    <!-- ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡ -->
    <Window.TaskbarItemInfo>
        <TaskbarItemInfo Description="ZJJYYYK Cloud Uploader"/>
    </Window.TaskbarItemInfo>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="200"/>
            <RowDefinition Height="*" MinHeight="100"/>
        </Grid.RowDefinitions>

        <!-- é…ç½®åŒº -->
        <GroupBox Grid.Row="0" Header="é…ç½®è®¾ç½®" Padding="10">
            <StackPanel>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" Text="ç›®æ ‡æ–‡ä»¶å¤¹:" VerticalAlignment="Center" Margin="5"/>
                    <TextBox Grid.Row="0" Grid.Column="1" x:Name="TargetFolderTextBox" IsReadOnly="True" Margin="5"/>
                    <Button Grid.Row="0" Grid.Column="2" Content="æµè§ˆ..." Click="BrowseTargetFolder_Click" Margin="5"/>

                    <StackPanel Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3" Orientation="Horizontal">
                        <CheckBox x:Name="AutoStartCheckBox" Content="å¼€æœºå¯åŠ¨" Checked="AutoStartCheckBox_Changed" Unchecked="AutoStartCheckBox_Changed"/>
                        <CheckBox x:Name="StartMinimizedCheckBox" Content="å¯åŠ¨åŽæœ€å°åŒ–" Checked="StartMinimizedCheckBox_Changed" Unchecked="StartMinimizedCheckBox_Changed" Margin="20,5,5,5"/>
                        <Button Content="å®‰è£…å³é”®èœå•" Click="InstallContextMenu_Click" Margin="20,5,5,5" Width="120"/>
                    </StackPanel>
                </Grid>
            </StackPanel>
        </GroupBox>

        <!-- æ–‡ä»¶ä¸Šä¼ åŒº -->
        <GroupBox Grid.Row="1" Header="æ–‡ä»¶ä¸Šä¼ " Margin="0,5,0,0">
            <StackPanel>
                <!-- æ‹–æ‹½åŒºåŸŸ -->
                <Border BorderBrush="Gray" 
                        BorderThickness="2" 
                        Background="WhiteSmoke"
                        AllowDrop="True"
                        Drop="DropZone_Drop"
                        DragEnter="DropZone_DragEnter"
                        DragOver="DropZone_DragOver"
                        DragLeave="DropZone_DragLeave"
                        x:Name="DropZoneBorder"
                        Height="150"
                        Margin="10">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <TextBlock Text="ðŸ“" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                        <TextBlock Text="æ‹–æ‹½æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹åˆ°æ­¤å¤„" FontSize="16" HorizontalAlignment="Center"/>
                        <TextBlock Text="ï¼ˆä»…å¤åˆ¶åˆ°ç›®æ ‡æ–‡ä»¶å¤¹ï¼Œä¸è‡ªåŠ¨æ‰§è¡Œ Git æ“ä½œï¼‰" FontSize="12" Foreground="Gray" HorizontalAlignment="Center" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>
                
                <!-- æ‰“å¼€æ–‡ä»¶å¤¹æŒ‰é’® -->
                <Button Content="æ‰“å¼€ç›®æ ‡æ–‡ä»¶å¤¹" Click="OpenTargetFolder_Click" Width="150" Margin="10,10,10,5" HorizontalAlignment="Center"/>
            </StackPanel>
        </GroupBox>

        <!-- Git æ“ä½œåŒº -->
        <GroupBox Grid.Row="2" Header="Git æ“ä½œ" Margin="0,5,0,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Git è¾“å‡ºæ¡† -->
                <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" Margin="5">
                    <TextBox x:Name="GitOutputTextBox" 
                             IsReadOnly="True" 
                             TextWrapping="Wrap" 
                             FontFamily="Consolas"
                             FontSize="12"
                             Background="Black"
                             Foreground="LightGreen"
                             Padding="5"/>
                </ScrollViewer>

                <!-- Git æŒ‰é’® -->
                <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="5">
                    <Button Content="Git Pull" Click="GitPull_Click" Width="100"/>
                    <Button Content="Git Add" Click="GitAdd_Click" Width="100"/>
                    <Button Content="Git Commit" Click="GitCommit_Click" Width="100"/>
                    <Button Content="Git Push" Click="GitPush_Click" Width="100"/>
                    <Button Content="ä¸€é”®æ‰§è¡Œ (Add+Commit+Push)" Click="GitAddCommitPush_Click" Width="200" Background="LightBlue"/>
                </StackPanel>
            </Grid>
        </GroupBox>

        <!-- æ—¥å¿—åŒº -->
        <Expander Grid.Row="3" Header="æ—¥å¿—" IsExpanded="False" Margin="0,5,0,0">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <TextBox x:Name="LogTextBox" 
                         IsReadOnly="True" 
                         TextWrapping="Wrap" 
                         FontFamily="Consolas"
                         FontSize="11"
                         Padding="5"/>
            </ScrollViewer>
        </Expander>

        <!-- æ‰˜ç›˜å›¾æ ‡ -->
        <tb:TaskbarIcon x:Name="TrayIcon"
                        ToolTipText="ZJJYYYK Cloud Uploader"
                        TrayMouseDoubleClick="TrayIcon_DoubleClick"
                        Visibility="Visible">
            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="æ˜¾ç¤º UI" Click="ShowWindow_Click"/>
                    <Separator/>
                    <MenuItem Header="é€€å‡ºç¨‹åº" Click="ExitApp_Click"/>
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>
    </Grid>
</Window>
